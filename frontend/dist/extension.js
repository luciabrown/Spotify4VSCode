(()=>{"use strict";var t={265:function(t,e,o){var s,n=this&&this.__createBinding||(Object.create?function(t,e,o,s){void 0===s&&(s=o);var n=Object.getOwnPropertyDescriptor(e,o);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,s,n)}:function(t,e,o,s){void 0===s&&(s=o),t[s]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[e.length]=o);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o=s(t),a=0;a<o.length;a++)"default"!==o[a]&&n(e,t,o[a]);return r(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(t){const e=process.platform,o=process.arch,s="win32"===e?`backend-${e}-${o}.exe`:`backend-${e}-${o}`,n=t.asAbsolutePath(u.join("out","bin",s)),r=c.spawn(n,[],{cwd:u.dirname(n),windowsHide:!0});r.stdout.on("data",t=>console.log(`backend: ${t}`)),r.stderr.on("data",t=>console.error(`backend error: ${t}`)),r.on("close",t=>console.log(`backend exited: ${t}`)),i.window.showInformationMessage("Go backend started");const a=t=>new Promise(e=>setTimeout(e,t));i.commands.registerCommand("Spotify4VSCode.helloWorld",()=>{i.window.showInformationMessage("Hello World from SpotifyNowListening!")}),t.subscriptions.push(new i.Disposable(()=>{try{r.kill()}catch{}}));const p=i.commands.registerCommand("Spotify4VSCode.spotifyPlayPause",async()=>{try{const t=await fetch("http://127.0.0.1:12345/playpause",{method:"PUT"}),e=await t.text();i.window.showInformationMessage(`Play: ${e}`)}catch(t){i.window.showErrorMessage(`Play error: ${t}`)}});t.subscriptions.push(p);const d=i.commands.registerCommand("Spotify4VSCode.spotifyPrev",async()=>{try{S();const t=await fetch("http://127.0.0.1:12345/prev",{method:"POST"}),e=await t.text();i.window.showInformationMessage(`Prev: ${e}`),await a(300),b(),g()}catch(t){i.window.showErrorMessage(`Prev error: ${t}`),g()}});t.subscriptions.push(d);const f=i.commands.registerCommand("Spotify4VSCode.spotifyNext",async()=>{try{S();const t=await fetch("http://127.0.0.1:12345/next",{method:"POST"}),e=await t.text();i.window.showInformationMessage(`Next: ${e}`),await a(400),b(),g()}catch(t){b(),g()}});t.subscriptions.push(f);const l=i.window.createStatusBarItem(i.StatusBarAlignment.Left,100);l.text="$(sync~spin) Fetching Spotify...",l.show(),t.subscriptions.push(l);const w=i.window.createStatusBarItem(i.StatusBarAlignment.Left,99);w.text="$(play-circle)",w.tooltip="PlayPause Spotify",w.command="Spotify4VSCode.spotifyPlayPause",w.show(),t.subscriptions.push(w);const h=i.window.createStatusBarItem(i.StatusBarAlignment.Left,98);h.text="$(debug-reverse-continue)",h.tooltip="Previous Spotify",h.command="Spotify4VSCode.spotifyPrev",h.show(),t.subscriptions.push(h);const m=i.window.createStatusBarItem(i.StatusBarAlignment.Left,97);let y;function g(){S(),y=setInterval(b,15e3)}function S(){y&&(clearInterval(y),y=void 0)}async function b(){try{const t=await fetch("http://127.0.0.1:12345/nowplaying");if(!t.ok)return void(l.text="$(error) Spotify fetch error");const e=await t.json();console.log("Spotify fetch data:",e),"Paused"===e.status?l.text="$(debug-pause) Not playing":e.song?l.text=`$(play) ${e.song} â€” ${e.artists}`:l.text="$(question) No song data"}catch(t){l.text="$(error) Failed to fetch Spotify"}}m.text="$(debug-continue)",m.tooltip="Next Spotify",m.command="Spotify4VSCode.spotifyNext",m.show(),t.subscriptions.push(m),b(),g()},e.deactivate=function(){};const i=a(o(398)),c=a(o(317)),u=a(o(928))},317:t=>{t.exports=require("child_process")},398:t=>{t.exports=require("vscode")},928:t=>{t.exports=require("path")}},e={},o=function o(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,o),r.exports}(265);module.exports=o})();